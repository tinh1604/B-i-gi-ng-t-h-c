(function(k,e){var n=function(l,f){this.doneClass="has-twitcounts";this.delay=1E3;this.countUrl="//counts.twitcount.com/counts.php?url=";this.url=l||k.location.href;this.title="Powered by TwitCount.com";this.request=function(c){var b=this.countUrl+this.url,a=new XMLHttpRequest;if(!a)return!1;a.onreadystatechange=function(){4==a.readyState&&200==a.status&&c(a.responseText)};a.open("GET",b,!0);a.send()};this.sumomePlugin=function(){var c=this,b=f.querySelectorAll(".sumome-share-client-share");[].forEach.call(b,
function(a){var h=a.parentElement;"twitter"!=a.getAttribute("data-sumome-share")||(a.classList.contains("sumome-share-client-count")||a.classList.contains(c.doneClass))||(a.classList.add(c.doneClass),c.request(function(g){g=JSON.parse(g).count;if(!isNaN(g)){var b=e.createElement("span"),d=e.createTextNode(g);b.title=c.title;b.appendChild(d);a.appendChild(b);a.classList.add("sumome-share-client-count");var b=h.querySelectorAll(".sumome-share-client-share-share span strong"),m=parseInt(g);[].forEach.call(b,
function(a){a.childNodes.length&&(a=c.extractNumber(a.childNodes[0].nodeValue),isNaN(a)||(m+=a))});g=h.querySelectorAll('.sumome-share-client-share-share[data-sumome-share="share"] span');[].forEach.call(g,function(a){var d=a.querySelectorAll("strong");if(d&&d.length)d[0].childNodes[0].nodeValue=c.formatNumber(m);else{var d=e.createElement("strong"),h=e.createElement("br"),b=e.createTextNode(c.formatNumber(m));d.appendChild(b);a.insertBefore(h,a.childNodes[0]);a.insertBefore(d,h);a.style.top="11.5px"}})}}))})};
this.shareaholicPlugin=function(){var c=f.querySelectorAll(".shareaholic-share-button"),b=this;[].forEach.call(c,function(a){var c=a.parentElement;"twitter"!=a.getAttribute("data-service")||(a.classList.contains("has-shares")||a.classList.contains(b.doneClass))||(a.classList.add(b.doneClass),b.request(function(g){var e=JSON.parse(g).count;isNaN(e)||(g=a.querySelectorAll(".share-button-counter"),[].forEach.call(g,function(c){c.childNodes[0].nodeValue=e;c.title=b.title;c.style.display="block;";a.classList.add("has-shares")}),
setInterval(function(){var a=c.querySelectorAll(".share-button-counter"),b=0;[].forEach.call(a,function(a){a.childNodes.length&&(b+=parseInt(a.childNodes[0].nodeValue))});a=c.querySelectorAll(".shareaholic-total-share-count");a.length&&a[0].childNodes.length&&(a[0].childNodes[0].nodeValue=b)},1E3))}))})};this.jetpackPlugin=function(){for(var c=this,b=f.querySelectorAll(".sharedaddy"),a=0;a<b.length;a++){var h=b[a];if(!h.classList.contains(c.doneClass)){h.classList.add(c.doneClass);var g=f.querySelectorAll("a.share-twitter span");
c.request(function(a){a=JSON.parse(a).count;if(!isNaN(a))for(var b=0;b<g.length;b++){var h=g[b],f=e.createElement("span"),k=e.createTextNode(a);f.appendChild(k);f.className="share-count";f.title=c.title;h.appendChild(f)}})}}};this.twitterOfficialButton=function(){var c=this;k.twttr&&k.twttr.ready(function(b){b.events.bind("rendered",function(a){var b=a.target;if(-1!==b.className.indexOf("twitter-share-button")){a=b.getAttribute("data-url");a||(a=c.url);var g=new XMLHttpRequest;if(!g)return!1;g.onreadystatechange=
function(){if(4===g.readyState&&200===g.status){var a=JSON.parse(g.responseText).count,d=e.createElement("div"),f=b.nextElementSibling&&b.nextElementSibling.getAttribute("data-count-position");isNaN(a)&&(a=0);f?(b.nextElementSibling.getAttribute("style")&&(d.style.cssText=b.nextElementSibling.style.cssText),b.nextElementSibling.remove()):f="right";d.className=(0<a?"":"twttr-share-no-counts ")+"twttr-share-counts twttr-share-counts-position-"+f;d.innerHTML=1E3<a?a/1E3+"K":a;d.style.height=d.style.height||
b.style.height;d.style.lineHeight=d.style.height;d.style.fontSize=d.style.fontSize||parseInt(b.style.height,10)/2+1+"px";d.title=c.title;"top"==f&&(d.style.width=d.style.width||b.style.width,d.style.top=d.style.top||"-"+(parseInt(b.style.height,10)+7)+"px",d.style.left=d.style.left||b.style.width);"right"==f?b.parentNode.insertBefore(d,b.nextSibling):b.parentNode.insertBefore(d,b)}};g.open("GET",c.countUrl+a,!0);g.send()}})})};this.extractNumber=function(c){var b=c;if(!b)return NaN;"string"==typeof c&&
(c=c.trim());if(c.endsWith("k")||c.endsWith("K"))c=c.substr(0,c.length-1),b=1E3*parseInt(c);return parseInt(b)};this.formatNumber=function(c){var b=c;1E3<c&&(b=Math.round(c/100)/10+"k");return b};this.init=function(){var c=this;setInterval(function(){c.shareaholicPlugin()},c.delay+100);setInterval(function(){c.sumomePlugin()},c.delay+150);setInterval(function(){c.jetpackPlugin()},c.delay+200);this.twitterOfficialButton()}};initTwitCount=function(){var l=e.createElement("link");l.rel="stylesheet";
l.type="text/css";l.href="//static1.twitcount.com/css/twitcount.css";l.media="all";e.getElementsByTagName("head")[0].appendChild(l);k.twttr=k.twttr||function(f,c,b){var a=f.getElementsByTagName(c)[0],e=k.twttr||{};f.getElementById(b)||(f=f.createElement(c),f.id=b,f.src="//platform.twitter.com/widgets.js",a.parentNode.insertBefore(f,a));e._e=[];e.ready=function(a){e._e.push(a)};return e}(e,"script","twitter-wjs");(new n(k.count_url,e)).init()};"loading"===e.readyState||"-1"!=navigator.userAgent.toLowerCase().indexOf("msie")?
e.addEventListener?e.addEventListener("DOMContentLoaded",initTwitCount,!1):e.attachEvent("onreadystatechange",function(){"complete"===e.readyState&&initTwitCount()}):initTwitCount()})(window,document);
